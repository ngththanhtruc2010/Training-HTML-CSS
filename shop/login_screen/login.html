<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1-0">
    <title>Login Screen</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!--custom css file link-->
    <!--font awsome cdn link-->
</head>

<body>
    <div class="loginform-body">

        <div class="container" id="container">
            <div class="form-container sign-up-container">
                <form action="#" id="loginForm">
                    <h1>Create Account</h1>
                    <div class="social-container signup">
                        <a href="#"><i class="fa-brands fa-facebook-f fa-sm" style="color: #0074cc;"></i></a>
                        <a href="#"><i class="fa-brands fa-google-plus-g fa-sm" style="color: #e7b604;"></i></a>
                        <a href="#"><i class="fa-brands fa-linkedin-in fa-sm" style="color: #0e9a70;"></i></a>
                    </div>
                    <span>or use your email for registration</span>
                    <div class="infield">
                        <input type="text" placeholder="Name" required />
                        <label></label>
                    </div>
                    <div class="infield">
                        <input type="email" placeholder="Email" required id="registerEmail" />
                        <label></label>
                    </div>
                    <div class="infield">
                        <input type="password" placeholder="Password" required id="registerPassword" />
                        <label></label>
                    </div>
                    <button type="submit">Sign Up</button>
                </form>
            </div>

            <div class="form-container sign-in-container">
                <form action="#" id="loginform">
                    <h1>Sign In</h1>
                    <div class="social-container signin">
                        <a href="#"><i class="fa-brands fa-facebook-f fa-" style="color: #0074cc;"></i></a>
                        <a href="#"><i class="fa-brands fa-google-plus-g fa-sm" style="color: #e7b604;"></i></a>
                        <a href="#"><i class="fa-brands fa-linkedin-in fa-sm" style="color: #0e9a70;"></i></a>
                    </div>
                    <span>or use your account</span>
                    <div class="infield">
                        <input type="text" placeholder="Email" required id="loginEmail" />
                        <label></label>
                    </div>
                    <div class="infield">
                        <input type="password" placeholder="Password" required id="loginPassword" />
                        <label></label>
                    </div>
                    <a href="#" class="forgot">Forgot your password</a>
                    <button id="loginButton">Sign In</button>
                </form>
                <div id="error-message" style="color: rgb(167, 6, 6);"></div>
            </div>

            <div class="overlay-container" id="overlaycon">
                <div class="overlay">
                    <div class="overlay-panel overlay-left">

                        <h1>Welcome Back!</h1>
                        <p>To keep connected with us, please login with your personal info</p>
                        <button>Sign In</button>
                    </div>

                    <div class="overlay-panel overlay-right">
                        <h1>Hello, Friend!</h1>
                        <p>Enter your personal details and start journey with us</p>
                        <button>Sign Up</button>
                    </div>
                </div>
                <button id="overlayBtn"></button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            let container = document.getElementById('container');
            let overlaycon = document.getElementById('overlaycon');
            let overlayBtn = document.getElementById('overlayBtn');

            overlayBtn.addEventListener("click", () => {
                container.classList.toggle("right-panel-active");
                overlayBtn.classList.remove('btnScaled');
                window.requestAnimationFrame(() => {
                    overlayBtn.classList.add('btnScaled')
                });
            });

            //Xử lý sự kiện click cho nút Sign In
            document.getElementById("loginButton").addEventListener("click", (event) => {
                event.preventDefault();


                const email = document.getElementById("loginEmail").value.trim();
                const password = document.getElementById("loginPassword").value.trim();
                let errors = [];
                // Kiểm tra email
                console.log(email);
                if (!email) {
                    errors.push("Email is required.");
                } else if (!validateEmail(email)) {
                    errors.push("Invalid email format.");
                }

                // Kiểm tra mật khẩu
                if (!password) {
                    errors.push("Password is required.");
                } else if (password.length < 6) {
                    errors.push("Password must be at least 6 characters long.");
                }
                alert(errors.join("/"))
                // Hiển thị lỗi nếu có
                const errorMessage = document.getElementById("error-message");
                if (errors.length > 0) {
                    errorMessage.innerHTML = errors.join("/");
                    errorMessage.classList.add("show");
                } else {
                    errorMessage.innerHTML = ""; // Xóa thông báo lỗi
                    errorMessage.classList.remove("show");
                    //Kiểm tra thông tin đăng nhập
                    let loginSuccess = checkLogin(email, password)
                    if (loginSuccess) {
                        alert("Login success.");
                    } else {
                        alert("Login failed.")
                    }
                }
            })

        });

        //Hàm kiểm tra thông tin đăng nhập
        function checkLogin(email, password) {
            const users = [
                { id: "1", account: "admin@mail.com", password: "admin2024" },
                { id: "2", account: "user@mail.com", password: "user2024" }
            ];
            return users.some(user => user.account === email && user.password);
        }

        // Hàm kiểm tra định dạng email
        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

        // Lấy phần tử từ DOM
        let loginForm = document.querySelector(".sign-up-container");
        let iconClick = document.querySelector('.social-container.signin');

        // Kiểm tra trạng thái lưu trữ trong localStorage
        if (localStorage.getItem("isHidden") === "true") {
            loginForm.classList.add("hidden");
        } else {
            loginForm.classList.remove("hidden");
        }
        let links = iconClick.querySelectorAll("a");

        // Thêm sự kiện click cho icon
        links.forEach(link => {
            link.addEventListener("click", (event) => {
                // event.preventDefault();
                console.log("Link clicked:", link);
            });
        });


    </script>

</body>

</html>